<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link rel="shortcut icon" href="{% static 'lib/images/logo.png'%}" />
    <title>UPSSA | Add School</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="{% static 'css/athlete/athlete.css' %}" />
    <!-- plugins:css -->
    {% include "assets/css.html" %}
  </head>
  <style>
    .form-step {
      display: none;
    }
    .form-step.active {
      display: block;
    }
    .progress-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .step {
      flex: 1;
      text-align: center;
      padding: 10px;
      background: #f0f0f0;
      position: relative;
    }
    .step.active {
      background: #4caf50;
      color: white;
    }
    .step:not(:last-child):after {
      content: "";
      position: absolute;
      right: -10px;
      top: 0;
      width: 0;
      height: 0;
      border-top: 20px solid transparent;
      border-bottom: 20px solid transparent;
      border-left: 10px solid #f0f0f0;
      z-index: 1;
    }
    .step.active:not(:last-child):after {
      border-left-color: #4caf50;
    }
    .form-navigation {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
    }
  </style>
  <body>
    <div
      class="account-page"
      style="background-image: url('https://wallpapers.com/images/hd/high-resolution-blue-background-1920-x-1080-9ievy5j853ofx6e1.jpg')"
    >
      <div class="container-fluid p-0">
        <div class="row align-items-center g-0 px-3 py-3 vh-100">
          <div class="col-xl-7">
            <div class="row">
              <div class="col-md-8 mx-auto">
                <div class="card">
                  <div class="card-body">
                    <div class="mb-0 p-0 p-lg-3">
                      <div class="mb-0 border-0 p-md-4 p-lg-0">
                        <div class="mb-3 p-0 text-center">
                          <div class="auth-brand">
                            <a class="logo logo-light" href="/">
                              <span class="logo-lg">
                                <img
                                  src="{% static 'images/upsa.png'%}"
                                  alt=""
                                  height="24"
                                />
                              </span>
                            </a>
                            <a class="logo logo-dark" href="/">
                              <span class="logo-lg">
                                <img
                                  src="{% static 'images/upsa.png'%}"
                                  alt=""
                                  height="24"
                                />
                              </span>
                            </a>
                          </div>
                        </div>

                        <div class="auth-title-section mb-4 text-center">
                          <h3 class="text-danger fw-semibold mb-1">
                            Welcome To UPSSA Community!
                          </h3>
                        </div>
                        <div class="pt-0">
                          <form
                            action=""
                            method="POST"
                            class="form-cotrol"
                            enctype="multipart/form-data"
                            id="multiStepForm"
                          >
                            {% csrf_token %}

                            <!-- Progress Steps Indicator -->
                            <div class="progress-steps">
                              <div class="step active" data-step="1">
                                School Info
                              </div>
                              <div class="step" data-step="2">Head Teacher</div>
                              <div class="step" data-step="3">
                                Games Teacher
                              </div>
                            </div>

                            <!-- Step 1: School Info -->
                            <div class="form-step active" data-step="1">
                              <div class="schoolt">
                                <h2>School Info</h2>
                                <div class="fields">
                                  <div class="left">
                                    <div class="img0box">
                                      <div class="field">
                                        <label>{{form.badge.label}} </label>
                                        <div
                                          id="badge_preview"
                                          class="preview-container aa"
                                        ></div>
                                      </div>
                                      <div class="field">
                                        <input
                                          type="file"
                                          name="badge"
                                          accept="image/*"
                                          id="id_badge"
                                        />
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <label>{{ form.school_name.label}}</label>
                                        {{form.school_name}}
                                      </div>
                                      <div class="col-md-6">
                                        <label
                                          >{{ form.center_number.label}}</label
                                        >
                                        {{form.center_number}}
                                      </div>
                                      <div class="col-md-6">
                                        <label
                                          >{{ form.EMIS.label}} </label
                                        >{{form.EMIS}}
                                      </div>

                                      <div class="col-md-6">
                                        <label>District:</label>
                                        {{form.district}}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-navigation">
                                <button
                                  type="button"
                                  class="btn btn-primary next-btn"
                                >
                                  Next
                                </button>
                              </div>
                            </div>

                            <!-- Step 2: Head Teacher -->
                            <div class="form-step" data-step="2">
                              <div class="schoolt">
                                <h2>Head Teacher</h2>
                                <div class="fields">
                                  <div class="left">
                                    <div class="img0box">
                                      <div class="field">
                                        <label>{{form.photo.label}} </label>
                                        <div
                                          id="photo_preview"
                                          class="preview-container"
                                        ></div>
                                      </div>
                                      <div class="field">
                                        <input
                                          type="file"
                                          name="photo"
                                          accept="image/*"
                                          onchange="displayImage2(this);"
                                          id="id_photo"
                                        />
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <label>First Name</label>
                                        {{form.fname}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>Last Name</label>
                                        {{form.lname}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>{{ form.nin.label}}</label>
                                        {{form.nin}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>{{ form.email.label}} </label
                                        >{{form.email}}
                                      </div>

                                      <div class="col-md-6">
                                        <label>Phone:</label>
                                        {{form.phone_number}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>gender</label>
                                        {{form.gender}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>Date of Birth</label>
                                        {{form.date_of_birth}}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-navigation">
                                <button
                                  type="button"
                                  class="btn btn-primary prev-btn"
                                >
                                  Previous
                                </button>
                                <button
                                  type="button"
                                  class="btn btn-primary next-btn"
                                >
                                  Next
                                </button>
                              </div>
                            </div>

                            <!-- Step 3: Games Teacher -->
                            <div class="form-step" data-step="3">
                              <div class="schoolt">
                                <h2>Games Teacher</h2>
                                <div class="fields">
                                  <div class="left">
                                    <div class="img0box">
                                      <div class="field">
                                        <label>Photo </label>
                                        <div
                                          id="gphoto_preview"
                                          class="preview-container"
                                        ></div>
                                      </div>
                                      <div class="field">
                                        <input
                                          type="file"
                                          name="gphoto"
                                          accept="image/*"
                                          onchange="displayImage1(this);"
                                          id="id_gphoto"
                                        />
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-md-6">
                                        <label>First name</label>
                                        {{form.gfname}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>Last name</label>
                                        {{form.glname}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>NIN:</label>
                                        {{form.gnin}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>Email </label>{{form.gemail}}
                                      </div>

                                      <div class="col-md-6">
                                        <label>Phone</label>
                                        {{form.gphone}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>Gender</label>
                                        {{form.ggender}}
                                      </div>
                                      <div class="col-md-6">
                                        <label>Date of birth</label>
                                        {{form.gdate_of_birth}}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-navigation">
                                <button
                                  type="button"
                                  class="btn btn-primary prev-btn"
                                >
                                  Previous
                                </button>
                                <button type="submit" class="btn btn-success">
                                  Save school
                                </button>
                              </div>
                            </div>

                            {% if messages %}
                            <div class="messages">
                              {% for message in messages %}
                              <div class="alert alert-{{ message.tags }}">
                                {{ message }}
                              </div>
                              {% endfor %}
                            </div>
                            {% endif %}
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xl-5 d-none d-xl-inline-block">
            <div class="account-page-bg rounded-4">
              <div class="text-center">
                <div class="auth-image">
                  <img
                    src="{% static 'images/upsa.png'%}"
                    class="mx-auto img-fluid"
                    alt="images"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="{% static 'js/cropper.js' %}"></script>
    <script src="{% static 'js/jquery-1.11.0.min.js'%}"></script>
    <script src="{% static 'js/plugins.js'%}"></script>
    <script src="{% static 'js/script.js'%}"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("multiStepForm");
        const steps = Array.from(document.querySelectorAll(".form-step"));
        const stepIndicators = Array.from(document.querySelectorAll(".step"));
        let currentStep = 0;

        // Initialize form
        showStep(currentStep);

        // Next button click handler
        document.querySelectorAll(".next-btn").forEach((button) => {
          button.addEventListener("click", function () {
            if (validateStep(currentStep)) {
              currentStep++;
              showStep(currentStep);
            }
          });
        });

        // Previous button click handler
        document.querySelectorAll(".prev-btn").forEach((button) => {
          button.addEventListener("click", function () {
            currentStep--;
            showStep(currentStep);
          });
        });

        function showStep(stepIndex) {
          // Hide all steps
          steps.forEach((step) => step.classList.remove("active"));
          // Show current step
          steps[stepIndex].classList.add("active");

          // Update progress indicators
          stepIndicators.forEach((indicator, index) => {
            if (index <= stepIndex) {
              indicator.classList.add("active");
            } else {
              indicator.classList.remove("active");
            }
          });

          // Hide/show navigation buttons as needed
          if (stepIndex === 0) {
            document
              .querySelectorAll(".prev-btn")
              .forEach((btn) => (btn.style.display = "none"));
          } else {
            document
              .querySelectorAll(".prev-btn")
              .forEach((btn) => (btn.style.display = "inline-block"));
          }

          if (stepIndex === steps.length - 1) {
            document
              .querySelectorAll(".next-btn")
              .forEach((btn) => (btn.style.display = "none"));
          } else {
            document
              .querySelectorAll(".next-btn")
              .forEach((btn) => (btn.style.display = "inline-block"));
          }
        }

        function validateStep(stepIndex) {
          // Get all inputs in current step
          const currentStepElement = steps[stepIndex];
          const inputs = currentStepElement.querySelectorAll(
            "input, select, textarea"
          );
          let isValid = true;

          // Simple validation - check if required fields are filled
          inputs.forEach((input) => {
            if (input.hasAttribute("required") && !input.value.trim()) {
              input.style.borderColor = "red";
              isValid = false;
            } else {
              input.style.borderColor = "";
            }
          });

          if (!isValid) {
            alert("Please fill in all required fields before proceeding.");
          }

          return isValid;
        }
      });
    </script>
  </body>
</html>
